<!DOCTYPE html>
{% load static %}
{% load django_bootstrap5 %}

<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{% block title %}Themba Tswai | Store{% endblock %}</title>
  
  <!-- Bootstrap CSS and Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="{% static 'css/sidebar.css' %}">
  <link rel="stylesheet" href="{% static 'css/footer.css' %}">
  <link rel="stylesheet" href="{% static 'css/store.css' %}">
  
  <!-- Swiper CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
  
  <!-- Lightbox -->
  <link href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css" rel="stylesheet">

  <link rel="stylesheet" href="{% static 'css/sidebar.css' %}">
  <link rel="stylesheet" href="{% static 'css/footer.css' %}">
  
  <!--JS_CLIENT_SCRIPT-->
  <style>
    :root {
      --main-bg: #FFF1EA;
      --main-dark: #0d0d0d;
      --accent: #8B3E1D;
      --text-color: #AA4D2A;
    }

    html {
      color: var(--text-color);
    }

    body {

      background-color: var(--main-bg);
      text-decoration-color: var(--accent);
      height: auto;
      max-height: 100%;
    }

    body.dark-mode {
      background-color: var(--main-dark);
      color: inherit;
      text-decoration-color: var(--accent);
    }

    main.dark-mode {
      background-color: var(--main-dark);
      color: inherit;
      text-decoration-color: var(--accent);
      overflow: scroll;

    }

    footer.dark-mode {
      background-color: var(--main-dark);
      color: inherit;
      text-decoration-color: var(--accent);
    }

    .card,
    .card-body,
    .card-footer {
      background: inherit;
      color: var(--text-color);
      font-family: serif;
      font-size: small;
      font-style: normal;
    }

    h5 {
      font-size: xx-large;
      display: inline-flex;
      justify-content: center;
      align-items: center;
      font-weight: bolder;
    }

    .card.dark-mode {
      background-color: var(--main-dark);
      color: inherit;
      text-decoration-color: var(--accent);
    }

    .sidebar .d-flex {
      background-color: inherit;
      color: var(--text-color);
      max-height: 100%;
    }

    .sidebar .nav-link {
      color: rgba(202, 87, 26, 0.92) !important;
    }

    .sidebar .nav-link:hover {
      background-color: var(--accent);
    }

    .btn-primary {
      background-color: var(--main-dark);
      border-color: var(--main-dark);
    }

    .btn-primary:hover {
      background-color: var(--accent);
      border-color: var(--accent);
    }

    footer {
      background-color: inherit;
      color: #b3b3b3;
      padding: 1rem 0;
    }

    footer a {
      color: #999;
      text-decoration: none;
    }

    footer a:hover {
      text-decoration: underline;
    }

    i {
      color: var(--accent);
    }
  </style>

  {% block extra_head %}{% endblock %}
</head>

<body class="container-flex bg-inherit">
  <!-- Navbar (for small screens) -->
  <nav class="navbar navbar-default d-md-none bg-inherit">
    <div class="container-fluid">
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarToggle">
        <span class="navbar-toggler-icon bg-inherit text-inherit"></span>
      </button>
      <button class="btn btn-sm btn-white" onclick="toggleDarkMode()"><i
          class="fas fa-adjust text-inherit"></i></button>
    </div>
  </nav>
  <!-- Sidebar -->

  <main class="d-flex justify-content-center m-0">

    <div class="flex sidebar d-md-block screen-h-100 mb-0 shadow-md collapse pt-2" id="sidebarToggle"
      style="max-height:100%;border-radius:0;width:250px;">
      <div class="text-center p-2 mb-4">
        <a class="text-inherit border-0 btn-outline text-decoration-none">
          <h1 class="text-inherit text-center"><i class="fas fa-shopping-cart me-2"></i></h1>
        </a>
      </div>
      <ul class="nav flex-column justify-content">
        <li class="nav-item">
          <a class="nav-link text-larger " href="{% url 'product_list' %}">
            <i class="fas fa-box-open me-auto"></i> Products
          </a>
        </li>
        <li class="nav-item ">
          <a class="nav-link text-larger" href="{% url 'shop' %}">
            <i class="fas fa-th fa-adjust-lg me-auto"></i> Categories
          </a>
        </li>
        <li class="nav-item text-larger">
          <a class="nav-link" href="{% url 'cart' %}">
            <i class="fas fa-shopping-cart me-auto"></i> Cart
          </a>
        </li>
        <li class="nav-item text-larger">
          <a class="nav-link" href="{% url 'checkout' %}">
            <i class="fas fa-credit-card me-auto"></i> Checkout
          </a>
        </li>
        <li class="nav-item mt-auto">
          <p class="nav-link text-inherit w-100" onclick="toggleDarkMode()">
            <i class="fas fa-adjust me-2 "></i>
          </p>
        </li>
      </ul>

    </div>
    <!-- Main Content -->
    {% block products_container %}
    <!-- Page-specific content -->
    {% endblock %}
  </main>

  <!-- Floating Cart Button (Mobile) -->
  <a href="{% url 'cart' %}" class="btn rounded-circle d-md-none" aria-label="Cart" role="status"
    style="background:#AA4D2A;position: fixed; bottom: 20px; right: 20px; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; z-index: 1000;">
    <i class="fas fa-shopping-cart text-white" style="font-size: 2rem;"></i>
  </a>

  <!-- Footer -->
  <footer class="footer shadow-md justify-content-center text-inherit text-center mt-0"
    style="position:relative;color: #aa4c2a6e;">
    <div class="container-fluid py-auto">
      <img src="{% static 'assets/icons/T-white.png' %}" alt="Logo" width="40" class="mb-2">
      <p class="mb-0 text-smaller d-flex justify-content-center"><small> {{ current_year }} All rights
          reserved.</small></p>
      <small> Privacy Policy</small> |
      <small> Terms of Service</small>
    </div>
  </footer>

<!-- Loading Splash -->
<div class="container-fluid flex" id="loading-splash" style="
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgb(188, 70, 11);
  color: white;
  display: none;
  align-items: center;
  justify-content: center;
  z-index:2000;">
  <div class="spinner-border text-inherit" style="width: 3rem; height: 3rem;" role="status">
    <span class="text-center text-inherit xx-larger"></span>
  </div>
  <h2 class="text-inherit text-center fw-bolder xx-larger">Loading...</h2>
</div>

<!-- JS Scripts -->

<script>
  // Show loading splash when any link is clicked
  document.addEventListener("DOMContentLoaded", function () {
    const splash = document.getElementById("loading-splash");
    document.querySelectorAll("a").forEach(link => {
      // Exclude anchor links and JavaScript voids
      if (link.getAttribute("href") && !link.getAttribute("href").startsWith("#") && !link.getAttribute("href").startsWith("javascript")) {
        link.addEventListener("click", function () {
          splash.style.display = "flex";
        });
      }
    });

    // Also trigger splash for form submissions
    document.querySelectorAll("form").forEach(form => {
      form.addEventListener("submit", function () {
        splash.style.display = "flex";
      });
    });
  });
</script>


<script>
  function toggleDarkMode() {
    document.body.classList.toggle('dark-mode');
    localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
  }

  // Load theme on page load
  (function () {
    const theme = localStorage.getItem('theme');
    if (theme === 'dark') {
      document.body.classList.add('dark-mode');
    }
  })();
</script>
<!-- JavaScript Libraries -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/glightbox/dist/js/glightbox.min.js"></script>

<!-- Initialize Lightbox -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Initialize GLightbox
    const lightbox = GLightbox({
      touchNavigation: true,
      loop: true,
      autoplayVideos: true
    });
  });
</script>



{% block extra_js %}{% endblock %}
</body>

</html>